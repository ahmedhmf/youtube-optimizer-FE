<div class="mx-auto max-w-7xl">
  <h2 class="text-3xl font-bold tracking-tight mb-8">Dashboard</h2>
  <div class="grid grid-cols-3 gap-4 mb-4">
    <section
      class="col-span-1 bg-[#0B0D11] border border-zinc-800 rounded-2xl p-4 flex flex-col gap-4"
    >
      <div class="absolute top-0 left-0 h-1.5 w-full gradient-highlight"></div>
      <div class="p-6">
        <p class="text-sm font-medium text-text-secondary-light dark:text-text-secondary-dark">
          Total Analyzed Videos
        </p>
        <p class="mt-1 text-4xl font-bold">1,284</p>
      </div>
    </section>
    <section
      class="col-span-1 bg-[#0B0D11] border border-zinc-800 rounded-2xl p-4 flex flex-col gap-4"
    >
      <div class="absolute top-0 left-0 h-1.5 w-full gradient-highlight"></div>
      <div class="p-6">
        <p class="text-sm font-medium text-text-secondary-light dark:text-text-secondary-dark">
          Average Analysis Time
        </p>
        <p class="mt-1 text-4xl font-bold">42s</p>
      </div>
    </section>
    <section
      class="col-span-1 bg-[#0B0D11] border border-zinc-800 rounded-2xl p-4 flex flex-col gap-4"
    >
      <div class="absolute top-0 left-0 h-1.5 w-full gradient-highlight"></div>
      <div class="p-6">
        <p class="text-sm font-medium text-text-secondary-light dark:text-text-secondary-dark">
          User Accuracy
        </p>
        <p class="mt-1 text-4xl font-bold">98.7%</p>
      </div>
    </section>
  </div>
  <div class="mt-10">
    <h3 class="text-xl font-semibold">Recent History</h3>
    <div class="mt-4 flow-root">
      <div class="-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
        <div class="inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8">
          <div class="bg-[#0B0D11] border border-zinc-800 rounded-2xl overflow-hidden text-xs">
            <table class="w-full border-collapse">
              <thead class="bg-[#1F201D] text-[11px] text-[#969790] border-b border-zinc-800">
                <tr>
                  <th class="text-left px-4 py-2 font-semibold text-[#969790]" scope="col">
                    Video Title
                  </th>
                  <th
                    class="px-4 py-2 text-left text-[11px] font-semibold text-[#969790]"
                    scope="col"
                  >
                    Date Analyzed
                  </th>
                  <th
                    class="px-4 py-2 text-left text-[11px] font-semibold text-[#969790]"
                    scope="col"
                  >
                    Status
                  </th>
                  <th
                    class="px-4 py-2 text-left text-[11px] font-semibold text-[#969790]"
                    scope="col"
                  >
                    <span class="sr-only">View</span>
                  </th>
                </tr>
              </thead>
              <tbody class="divide-y divide-zinc-800">
                @for (job of jobs; track job.id) {
                  <tr>
                    <td class="px-4 py-3 text-md text-[#D6D6D6]">
                      {{ job.data.video_title }}
                    </td>
                    <td class="whitespace-nowrap px-4 py-3 text-md text-[#969790]">
                      {{ getTimeDifference(job.createdAt) }}
                    </td>
                    <td class="whitespace-nowrap px-4 py-3 text-md text-[#969790]">
                      @if (job.status === 'completed') {
                        <span
                          class="inline-flex items-center gap-1 px-2 py-1 rounded-full bg-emerald-500/15 text-[11px] text-emerald-400 border border-emerald-500/40"
                        >
                          <span class="w-1.5 h-1.5 rounded-full bg-emerald-400"></span>
                          Completed
                        </span>
                      } @else if (job.status === 'failed') {
                        <span
                          class="inline-flex items-center gap-1 px-2 py-1 rounded-full bg-red-600/20 text-[11px] text-red-300 border border-red-500/40"
                        >
                          <span class="w-1.5 h-1.5 rounded-full bg-red-300"></span>
                          Failed
                        </span>
                      } @else if (job.status === 'processing') {
                        <span
                          class="inline-flex items-center gap-1 px-2 py-1 rounded-full bg-zinc-600/20 text-[11px] text-zinc-300 border border-zinc-500/40"
                        >
                          <span class="w-1.5 h-1.5 rounded-full bg-zinc-300"></span>
                          Pending
                        </span>
                      }
                    </td>
                    <td
                      class="relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"
                    >
                      @if (job.status === 'completed') {
                        <button
                          class="px-4 py-2 rounded-xl bg-[#111318] border border-zinc-700 text-zinc-300 text-sm hover:bg-[#151821] hover:border-zinc-600 transition-all duration-200"
                          type="button"
                          (click)="viewJobDetails(job.id)"
                        >
                          View
                        </button>
                      } @else if (job.status === 'failed') {
                        <button
                          class="px-4 py-2 rounded-xl bg-[#111318] border border-green-700 text-green-300 text-sm hover:bg-[#151821] hover:border-green-600 transition-all duration-200"
                          type="button"
                          (click)="retryJob(job.id)"
                        >
                          Retry
                        </button>
                      } @else {
                        <button
                          class="px-4 py-2 rounded-xl bg-[#111318] border border-red-700 text-red-300 text-sm hover:bg-[#151821] hover:border-red-600 transition-all duration-200"
                          type="button"
                          (click)="cancelJob(job.id)"
                        >
                          Cancel
                        </button>
                      }
                    </td>
                  </tr>
                }
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
