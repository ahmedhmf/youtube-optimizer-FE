<mat-card class="analyze-card">
    <mat-card-header>
        <mat-card-title>ðŸŽ¬ Analyze a New Video</mat-card-title>
        <mat-card-subtitle>
            Paste a link. Our AI will analyze the content and show insights instantly.
        </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
        <div class="upload-section">
            <mat-form-field appearance="fill" class="link-field">
                <mat-label>Video Link (YouTube, Vimeo, etc.)</mat-label>
                <input matInput placeholder="https://example.com/video" [value]="sourceUrl()"
                    (input)="sourceUrl.set(($any($event.target)).value)" />
            </mat-form-field>
        </div>

        <div class="actions">
            @if(this.store.status() !== 'analyzing'){
            <button color="primary" mat-raised-button type="button" [disabled]="!canAnalyze() || this.store.status() === 'analyzing'"
                (click)="analyze()">
                <mat-icon>play_arrow</mat-icon>
                <span>Analyze</span>
            </button>
            } @else{
            <button color="primary" mat-raised-button type="button" [disabled]="!canAnalyze() || this.store.status() === 'analyzing'"
                (click)="analyze()">
                <mat-spinner diameter="20" />
                <span>Analyzing...</span>
            </button>
            }

            @if(sourceUrl()){
            <button color="warn" mat-button type="button" (click)="reset()">
                Reset
            </button>
            }
        </div>

        <!-- Results -->
        @if(this.store.status() === 'done' && store.audits()){
        <div class="result">
            <h3>Audits Result</h3>
            <pre>{{ store.audits()?.at(-1) | json }}</pre>
        </div>
        }
        @if(this.store.status() === 'error'){
        <div class="error">{{ store.message() }}</div>
        }
    </mat-card-content>
</mat-card>