<div class="history-container">
  <mat-card class="history-header">
    <h2>Your Videos History</h2>
    <p>See all the videos Descripta has analyzed for you.</p>

    <mat-form-field appearance="outline" class="search-field">
      <mat-label>Search videos</mat-label>
      <input matInput placeholder="Type a title or keyword..." (input)="store.setFilterText($event.target.value)" />
      <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>
  </mat-card>

  <div class="history-grid">
    @for(audits of store.filteredAudits(); track audits){
    <mat-card class="video-card">
      <div class="thumbnail">
        <img alt="{{ audits.video_title }}" [src]="audits.thumbnail_url" />
      </div>

      <div class="video-info">
        <h3>{{ audits.video_title }}</h3>
        <p class="date">Analyzed on {{ audits.created_at | date: 'mediumDate' }}</p>
        <p class="desc">{{ audits.ai_description }}</p>
      </div>

      <div class="actions">
        <button color="tertiary" mat-icon-button (click)="delete(audits.id)">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
    </mat-card>
    }

    @if(store.filteredAudits()?.length === 0){
    <p class="no-data">
      No matching videos found.
    </p>
    }
  </div>
</div>